
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             id="Definitions_1"
             targetNamespace="http://bpmn.io/schema/bpmn">
  <process id="OrderFulfillmentProcess" isExecutable="true" name="Order Fulfillment Process">
    <startEvent id="StartEvent_CustomerSubmitsOrder" name="Customer submits order">
      <outgoing>Flow_StartToCheckInventory</outgoing>
    </startEvent>
    <task id="Task_CheckInventory" name="Check inventory for item availability">
      <incoming>Flow_StartToCheckInventory</incoming>
      <outgoing>Flow_CheckInventoryToGateway</outgoing>
    </task>
    <exclusiveGateway id="Gateway_InventoryAvailable" name="Items in stock?">
      <incoming>Flow_CheckInventoryToGateway</incoming>
      <outgoing>Flow_GatewayToPack</outgoing>
      <outgoing>Flow_GatewayToEndNoStock</outgoing>
    </exclusiveGateway>
    <task id="Task_PackItems" name="Pack and prepare items for shipment">
      <incoming>Flow_GatewayToPack</incoming>
      <outgoing>Flow_PackToShip</outgoing>
    </task>
    <task id="Task_ShipOrder" name="Ship order to customer">
      <incoming>Flow_PackToShip</incoming>
      <outgoing>Flow_ShipToEnd</outgoing>
    </task>
    <endEvent id="EndEvent_OrderShipped" name="Order shipped">
      <incoming>Flow_ShipToEnd</incoming>
    </endEvent>
    <endEvent id="EndEvent_NoStock" name="Order cannot be fulfilled - no stock">
      <incoming>Flow_GatewayToEndNoStock</incoming>
    </endEvent>
    <sequenceFlow id="Flow_StartToCheckInventory" sourceRef="StartEvent_CustomerSubmitsOrder" targetRef="Task_CheckInventory"/>
    <sequenceFlow id="Flow_CheckInventoryToGateway" sourceRef="Task_CheckInventory" targetRef="Gateway_InventoryAvailable"/>
    <sequenceFlow id="Flow_GatewayToPack" sourceRef="Gateway_InventoryAvailable" targetRef="Task_PackItems">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[itemsInStock == true]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_GatewayToEndNoStock" sourceRef="Gateway_InventoryAvailable" targetRef="EndEvent_NoStock">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[itemsInStock == false]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_PackToShip" sourceRef="Task_PackItems" targetRef="Task_ShipOrder"/>
    <sequenceFlow id="Flow_ShipToEnd" sourceRef="Task_ShipOrder" targetRef="EndEvent_OrderShipped"/>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_OrderFulfillment">
    <bpmndi:BPMNPlane id="BPMNPlane_OrderFulfillment" bpmnElement="OrderFulfillmentProcess">
      <!-- Diagram elements omitted for brevity -->
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>